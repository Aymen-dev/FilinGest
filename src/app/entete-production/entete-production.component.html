<form (ngSubmit)="submitForm(form)" #form="ngForm">
    <div class="card card-body">
        <div class="col-sm-5 mb-4">
            <div class="d-flex flex-column gap-3">
                <h2 class="mb-4">Production journaliere</h2>
                <div class="d-flex align-items-center gap-3 mb-1">
                    <h5 class="m-0">Date</h5>
                    <input type="date" class="form-control" required [(ngModel)]="dateProd" name="date-prod" />
                </div>
                <div class="d-flex align-items-center gap-3 mb-1">
                    <h5 class="m-0">Departement</h5>
                    <select class="form-select" required [(ngModel)]="formData.idDepartement" name="departement"
                        (change)="loadListeEquipes(+formData.idDepartement!)">
                        <option value=null selected disabled>Selectionner un departement</option>
                        @for(dep of departements; track $index) {
                        <option [value]="dep.id_departement">{{dep.nom_departement}}</option>
                        }
                    </select>
                </div>
            </div>
        </div>

        <div class="d-flex gap-3 mb-4">
            <div class="col-sm-5">
                <h5>Equipe</h5>
                <select class="form-select" required [(ngModel)]="formData.idEquipe" name="equipe"
                    [disabled]="!formData.idDepartement" (change)="loadListePersonnel(+formData.idEquipe!)">
                    <option value=null selected disabled>Selectionner une equipe</option>
                    @for (equipe of equipes; track $index){
                    <option [value]="equipe.id_equipe">{{equipe.id_equipe}} - {{ equipe.nom_equipe }}</option>
                    }
                </select>
            </div>
            <div class="col-sm">
                <div *ngIf="listeSuperviseurs[0]">
                    <h5>Superviseur</h5>
                    <input type="text" class="form-control" disabled [(ngModel)]="formData.idSuperviseur"
                        name="superviseur" [placeholder]="listeSuperviseurs[0].nom_prenom" />
                </div>
            </div>
            <div class="col-sm">
                <div *ngIf="listeTeamLeaders[0]">
                    <h5>Team leader</h5>
                    <input type="text" class="form-control" disabled [(ngModel)]="formData.idTeamLeader"
                        name="team_leader" [placeholder]="listeTeamLeaders[0].nom_prenom" />
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end">
            <button type="submit" class="button mt-3">Remplir details</button>
        </div>


    </div>
</form>